function Parameters(){this.selectedAlgo="rotatedEll";this.fadeTime=400;this.standard="bgcolor,count,stroke,strokeW,fill,opacity,minsize,maxsize,paddingV,paddingH".split(",");this.added=[];this.optionboxRef=$("select#algoselect");this.textboxRef=$('textarea[name="textbox"]');for(var a in this.standard){var b=this.standard[a];this[b+"Ref"]=$('input[name="'+b+'"]')}for(var c in Algorithms.title)this.optionboxRef.append('<option value="'+c+'">'+Algorithms.title[c]+"</option>")}
Parameters.prototype.get=function(){console.log("Parameters.get() called.");for(var a in this.standard){var b=this.standard[a];this[b]=this[b+"Ref"].val()}this.textbox=this.textboxRef.val();for(a in this.added)b=this.added[a],this[b]=$('input[name="'+b+'"]').val()};Parameters.prototype.reset=function(){console.log("Parameters resetted.");$("tr").show();$(".generated").remove();this.added=[]};
Parameters.prototype.set=function(a){for(var b in this.standard){var c=this.standard[b];$('input[name="'+c+'"]').val(a[c])}$('textarea[name="textbox"]').val(a.textbox)};
Parameters.prototype.randomize=function(){this.bgcolorRef.val(Math.rndHex());this.countRef.val(Math.rnd(1,70));this.strokeRef.val(Math.rndHex());this.strokeWRef.val(Math.rnd(1,25));this.fillRef.val(Math.rndHex());this.opacityRef.val(Math.rnd(1,100));this.minsizeRef.val(Math.rnd(1,70));this.maxsizeRef.val(Math.rnd(1,250));this.paddingVRef.val(Math.rnd(-100,240));this.paddingHRef.val(Math.rnd(-100,320))};Parameters.prototype.hide=function(a){for(var b in a)$("tr#"+a[b]).hide()};
Parameters.prototype.add=function(a,b,c,d){$("tr#textbox").before('<tr id="'+a+'" class="generated" title="'+c+'">'+("<td>"+b+"</td>")+('<td><input type="text" name="'+a+'" value="'+d+'" /></td>')+"</tr>");$("tr#"+a).tipsy({gravity:"w"});this.added.push(a)};
Parameters.prototype.validate=function(){function a(a,d,e,g){var f=$('input[name="'+a+'"]').val();!isNaN(f)&&f>=d&&f<=e||f==g||(console.warn('Parameter "'+a+'" with value "'+f+'" did not pass validation.(Not a valid Number)'),$("#"+a).addClass("error"),b=!1)}$("tr").removeClass("error");var b=!0;a("count",0,8096);a("strokeW",0,200,"none");a("opacity",0,100);a("minsize",0,8096);a("maxsize",-8096,8096);a("paddingV",-8096,8096);a("paddingH",-8096,8096);return b};function Paper(){this.paperRef=$("#paper");this.benchmarkRef=$("#benchmark");this.X=this.paperRef.width();this.Y=this.paperRef.height();this.overlaymode=!1}Paper.prototype.prepare=function(){console.log("Preparing Paper");this.clear();this.svg=new Raphael("paper",this.X,this.Y);"none"!=Controller.params.bgcolor&&this.svg.rect(0,0,this.X,this.Y).attr({fill:Controller.params.bgcolor,stroke:"none"})};Paper.prototype.getSize=function(){this.X=this.paperRef.width();this.Y=this.paperRef.height()};
Paper.prototype.clear=function(){this.paperRef.html("");this.benchmarkRef.hide()};var Algorithms={title:{},prepare:{},draw:{}};
Algorithms.draw.intro=function(){function a(){b.animate({stroke:"#AAA","stroke-width":Math.rnd(10,80),"stroke-opacity":0.5},Math.rnd(2E3,3E3),function(){a()})}Controller.paper.getSize();Controller.paper.prepare();Controller.params.bgcolor="#FFF";var b=Controller.paper.svg.circle(Controller.paper.X/2,Controller.paper.Y/2,Math.rnd(150,Controller.paper.Y/2-50)).attr({fill:"#000",stroke:"#777",opacity:0.2,"stroke-width":0});Controller.paper.svg.text(Controller.paper.X/2,Controller.paper.Y/2,"Press Generate!").attr({fill:"#FFF",
stroke:"none","font-size":24,opacity:1});a()};Algorithms.title.rotatedEll="Rotated Ellipses";Algorithms.prepare.rotatedEll=function(){Controller.params.hide(["textbox"]);Controller.params.add("aspectratio","Aspect Ratio:","Aspect Ratio of the Ellipse. Y is X multiplied by [factor].",1.41);Controller.params.set({bgcolor:"#F5F5F5",count:32,stroke:"#555",strokeW:1,fill:"none",opacity:50,minsize:120,maxsize:130,paddingV:240,paddingH:320})};
Algorithms.draw.rotatedEll=function(){for(var a,b,c,d,e=0,g=360/Controller.params.count,f=0;f<Controller.params.count;f+=1)a=Math.rnd(Controller.params.paddingH,Controller.paper.X-Controller.params.paddingH),b=Math.rnd(Controller.params.paddingV,Controller.paper.Y-Controller.params.paddingV),c=Math.rnd(Controller.params.minsize,Controller.params.maxsize),d=c*Controller.params.aspectratio,Controller.paper.svg.ellipse(a,b,c,d).transform("r"+e).attr({fill:Controller.params.fill,stroke:Controller.params.stroke,
"stroke-width":Controller.params.strokeW,opacity:Controller.params.opacity/100}),e+=g};Algorithms.title.circles01="Random Circles";Algorithms.prepare.circles01=function(){Controller.params.hide(["textbox"]);Controller.params.set({bgcolor:"#F0F0F0",count:32,stroke:"#CCC",strokeW:1,fill:"#000",opacity:20,minsize:30,maxsize:125,paddingV:120,paddingH:110})};
Algorithms.draw.circles01=function(){for(var a,b,c,d=0;d<Controller.params.count;d+=1)a=Math.rnd(Controller.params.paddingH,Controller.paper.X-Controller.params.paddingH),b=Math.rnd(Controller.params.paddingV,Controller.paper.Y-Controller.params.paddingV),c=Math.rnd(Controller.params.minsize,Controller.params.maxsize),Controller.paper.svg.circle(a,b,c).attr({fill:Controller.params.fill,stroke:Controller.params.stroke,"stroke-width":Controller.params.strokeW,opacity:Controller.params.opacity/100})};
Algorithms.title.rectangles01="Random Rectangles";
Algorithms.prepare.rectangles01=function(){Controller.params.hide(["minsize","maxsize","textbox"]);Controller.params.add("minSizeW","Min Size Width:","Minimum horizontal Size of Rectangles",20);Controller.params.add("minSizeH","Min Size Height:","Minimum vertical Size of Rectangles",20);Controller.params.add("maxSizeW","Max Size Width:","Maximum horizontal Size of Rectangles",300);Controller.params.add("maxSizeH","Max Size Height:","Maximum vertical Size of Rectangles",300);Controller.params.add("roundedB",
"Rounded Borders:","Size of rounded Borders ",5);Controller.params.set({bgcolor:"#242424",count:32,stroke:"none",strokeW:0,fill:"#FFF",opacity:20,minsize:150,paddingV:120,paddingH:120})};
Algorithms.draw.rectangles01=function(){for(var a,b,c,d,e,g=0;g<Controller.params.count;g+=1)a=Math.rnd(Controller.params.paddingH,Controller.paper.X-Controller.params.paddingH),b=Math.rnd(Controller.params.paddingV,Controller.paper.Y-Controller.params.paddingV),c=1*Controller.params.minSizeW+Math.rnd(0,Controller.params.maxSizeW),d=1*Controller.params.minSizeH+Math.rnd(0,Controller.params.maxSizeH),e="t-"+c/2+",-"+d/2,Controller.paper.svg.rect(a,b,c,d,Controller.params.roundedB).transform(e).attr({fill:Controller.params.fill,
stroke:Controller.params.stroke,"stroke-width":Controller.params.strokeW,opacity:Controller.params.opacity/100})};Algorithms.title.straightLines="Straight Lines";Algorithms.prepare.straightLines=function(){Controller.params.hide(["minsize","maxsize","textbox"]);Controller.params.set({count:300,bgcolor:"#FFF",Parameters:500,stroke:"#000",strokeW:1,fill:"none",opacity:100,paddingV:5,paddingH:5})};
Algorithms.draw.straightLines=function(){var a,b,c;a=Math.rnd(Controller.params.paddingH,Controller.paper.X-Controller.params.paddingH);b=Math.rnd(Controller.params.paddingV,Controller.paper.Y-Controller.params.paddingV);c="M "+a+" "+b+" ";for(var d=0;d<Controller.params.count;d+=1)a=Math.rnd(Controller.params.paddingH,Controller.paper.X-Controller.params.paddingH),b=Math.rnd(Controller.params.paddingV,Controller.paper.Y-Controller.params.paddingV),c+="L "+a+" "+b+" ";Controller.paper.svg.path(c+
" z").attr({fill:Controller.params.fill,stroke:Controller.params.stroke,"stroke-width":Controller.params.strokeW,opacity:Controller.params.opacity/100})};Algorithms.title.curvedLines="Curved Lines";Algorithms.prepare.curvedLines=function(){Controller.params.hide(["fill","strokeW","textbox"]);Controller.params.add("nodes","# of Nodes:","Number of Nodepoints. Set to 0 for none.",1);Controller.params.set({bgcolor:"#141414",count:300,stroke:"#EEE",opacity:40,minsize:1,maxsize:1,paddingV:-50,paddingH:-50})};
Algorithms.draw.curvedLines=function(){var a,b,c,d,e,g;if(1>Controller.params.nodes)for(var f=0;f<Controller.params.count;f+=1)a=Math.rnd(Controller.params.paddingH,Controller.paper.X-Controller.params.paddingH),b=Math.rnd(Controller.params.paddingV,Controller.paper.Y-Controller.params.paddingV),c=Math.rnd(Controller.params.paddingH,Controller.paper.X-Controller.params.paddingH),d=Math.rnd(Controller.params.paddingV,Controller.paper.Y-Controller.params.paddingV),e=Math.rnd(Controller.params.paddingH,
Controller.paper.X-Controller.params.paddingH),g=Math.rnd(Controller.params.paddingV,Controller.paper.Y-Controller.params.paddingV),c="M "+a+" "+b+"S"+c+" "+d+" "+e+" "+g+" ",Controller.paper.svg.path(c).attr({fill:Controller.params.fill,stroke:Controller.params.stroke,"stroke-width":Math.rnd(Controller.params.minsize,Controller.params.maxsize),opacity:Controller.params.opacity/100});else for(var h=0;h<Controller.params.nodes;h+=1){a=Math.rnd(Controller.params.paddingH,Controller.paper.X-Controller.params.paddingH);
b=Math.rnd(Controller.params.paddingV,Controller.paper.Y-Controller.params.paddingV);for(f=0;f<Controller.params.count/Controller.params.nodes;f+=1)c=Math.rnd(Controller.params.paddingH,Controller.paper.X-Controller.params.paddingH),d=Math.rnd(Controller.params.paddingV,Controller.paper.Y-Controller.params.paddingV),e=Math.rnd(Controller.params.paddingH,Controller.paper.X-Controller.params.paddingH),g=Math.rnd(Controller.params.paddingV,Controller.paper.Y-Controller.params.paddingV),c="M "+a+" "+
b+"S"+c+" "+d+" "+e+" "+g+" ",Controller.paper.svg.path(c).attr({fill:Controller.params.fill,stroke:Controller.params.stroke,"stroke-width":Math.rnd(Controller.params.minsize,Controller.params.maxsize),opacity:Controller.params.opacity/100})}};Algorithms.title.bezierLines="Bezier Lines";
Algorithms.prepare.bezierLines=function(){Controller.params.hide(["strokeW","textbox"]);Controller.params.add("beziers","# of Beziers:","Number of Beziers-Sets to be drawn",2);Controller.params.set({bgcolor:"#000",count:200,stroke:"#EEE",fill:"none",opacity:30,minsize:1,maxsize:3,paddingV:-220,paddingH:-220})};
Algorithms.draw.bezierLines=function(){for(var a,b,c,d,e,g,f=0;f<Controller.params.beziers;f+=1){a=Math.rnd(Controller.params.paddingH,Controller.paper.X-Controller.params.paddingH);b=Math.rnd(Controller.params.paddingV,Controller.paper.Y-Controller.params.paddingV);e=Math.rnd(Controller.params.paddingH,Controller.paper.X-Controller.params.paddingH);g=Math.rnd(Controller.params.paddingV,Controller.paper.Y-Controller.params.paddingV);for(var h=0;h<Controller.params.count;h+=1)c=Math.rnd(Controller.params.paddingH,
Controller.paper.X-Controller.params.paddingH),d=Math.rnd(Controller.params.paddingV,Controller.paper.Y-Controller.params.paddingV),c="M "+a+" "+b+"Q"+c+" "+d+" "+e+" "+g+" ",Controller.paper.svg.path(c).attr({fill:Controller.params.fill,stroke:Controller.params.stroke,"stroke-width":Math.rnd(Controller.params.minsize,Controller.params.maxsize),opacity:Controller.params.opacity/100})}};Algorithms.title.sunbeamLines="Sunbeam Lines";
Algorithms.prepare.sunbeamLines=function(){Controller.params.hide(["fill","strokeW","textbox"]);Controller.params.set({bgcolor:"#333",count:200,stroke:"#FFF",opacity:50,minsize:1,maxsize:12,paddingV:-50,paddingH:-50,p1:70})};
Algorithms.draw.sunbeamLines=function(){var a,b,c,d;a=Math.rnd(Controller.params.paddingH,Controller.paper.X-Controller.params.paddingH);b=Math.rnd(Controller.params.paddingV,Controller.paper.Y-Controller.params.paddingV);for(var e=0;e<Controller.params.count;e+=1)c=Math.rnd(Controller.params.paddingH,Controller.paper.X-Controller.params.paddingH),d=Math.rnd(Controller.params.paddingV,Controller.paper.Y-Controller.params.paddingV),c="M "+a+" "+b+"L "+c+" "+d+" ",Controller.paper.svg.path(c).attr({fill:Controller.params.fill,
stroke:Controller.params.stroke,"stroke-width":Math.rnd(Controller.params.minsize,Controller.params.maxsize),opacity:Controller.params.opacity/100})};Algorithms.title.parallelLines="Parallel Lines";
Algorithms.prepare.parallelLines=function(){Controller.params.hide("count,strokeW,paddingV,paddingH,fill,textbox".split(","));Controller.params.add("rPadding","Random Padding:","Amound of random Padding between Lines",20);Controller.params.set({count:1,bgcolor:"#111",stroke:"#999",opacity:20,minsize:1,maxsize:15})};
Algorithms.draw.parallelLines=function(){var a,b;for(a=0;!(b="M "+a+" 0 L "+a+" "+Controller.paper.Y,Controller.paper.svg.path(b).attr({stroke:Controller.params.stroke,"stroke-width":Math.rnd(Controller.params.minsize,Controller.params.maxsize),opacity:Controller.params.opacity/100}),a+=Math.rnd(0,Controller.params.rPadding),a>Controller.paper.X););};Algorithms.title.textChars="Text (Chars)";
Algorithms.prepare.textChars=function(){Controller.params.hide(["stroke","strokeW"]);Controller.params.add("chars","# of Chars:","Number of Chars bundled together",3);Controller.params.add("fontfamily","Font-Family:","Which Font to use","Arial");Controller.params.set({bgcolor:"#F0F0F0",count:30,fill:"#000",opacity:30,minsize:10,maxsize:300,paddingV:120,paddingH:120,textbox:"{}"})};
Algorithms.draw.textChars=function(){for(var a,b,c,d,e=0;e<Controller.params.count;e+=1){a=Math.rnd(Controller.params.paddingH,Controller.paper.X-Controller.params.paddingH);b=Math.rnd(Controller.params.paddingV,Controller.paper.Y-Controller.params.paddingV);c=Math.rnd(Controller.params.minsize,Controller.params.maxsize);d="";for(var g=0;g<Controller.params.chars;g+=1){var f=Math.rnd(0,Controller.params.textbox.length-1);d+=Controller.params.textbox[f]}Controller.paper.svg.text(a,b,d).attr({fill:Controller.params.fill,
stroke:Controller.params.stroke,opacity:Controller.params.opacity/100,"font-size":c,"font-family":Controller.params.fontfamily})}};Algorithms.title.textWords="Text (Words)";Algorithms.prepare.textWords=function(){Controller.params.hide(["stroke","strokeW"]);Controller.params.add("fontfamily","Font-Family:","Which Font to use","Garamond");Controller.params.set({bgcolor:"#E8E8E8",count:30,fill:"#242424",opacity:40,minsize:12,maxsize:150,paddingV:70,paddingH:150,textbox:"Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua."})};
Algorithms.draw.textWords=function(){for(var a,b,c,d,e=Controller.params.textbox.split(" "),g=0;g<Controller.params.count;g+=1)a=Math.rnd(Controller.params.paddingH,Controller.paper.X-Controller.params.paddingH),b=Math.rnd(Controller.params.paddingV,Controller.paper.Y-Controller.params.paddingV),c=Math.rnd(Controller.params.minsize,Controller.params.maxsize),d=Math.rnd(0,e.length-1),Controller.paper.svg.text(a,b,e[d]).attr({fill:Controller.params.fill,stroke:Controller.params.stroke,opacity:Controller.params.opacity/
100,"font-size":c,"font-family":Controller.params.fontfamily})};Algorithms.prepare.experiment=function(){Controller.params.hide(["textbox"]);Controller.params.set({bgcolor:"#E8E8E8",count:30,stroke:"#000",strokeW:1,fill:"none",opacity:100,minsize:12,maxsize:150,paddingV:70,paddingH:150,textbox:"Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua."})};
Algorithms.draw.experiment=function(){function a(k,l,i,j){7<i&&(b=k+i*Math.cos(j),c=l+i*Math.sin(j),d=k+i*Math.cos(j+90),e=l+i*Math.sin(j+90),g=k+i*Math.cos(j+180),f=l+i*Math.sin(j+180),m="M "+k+" "+l+"L"+b+" "+c+"",m+="M "+k+" "+l+"L"+d+" "+f+"",m+="M "+k+" "+l+"L"+g+" "+f+"",h=Controller.paper.svg.path(m),h.attr({fill:Controller.params.fill,stroke:Controller.params.stroke,"stroke-width":Controller.params.strokeW,opacity:Controller.params.opacity/100}),a(b,c,0.75*i,j+10),a(d,e,0.66*i,j-20),a(g,f,
0.75*i,j+10))}var b,c,d,e,g,f,h,m;a(320,240,70,90)};var Controller={};
$(document).ready(function(){console.log("DOM Ready: Main Init");Controller.paper=new Paper;Controller.params=new Parameters;$("#algoselect").val(Controller.params.selectedAlgo);Algorithms.prepare[Controller.params.selectedAlgo]();Algorithms.draw.intro();$(".colorpick").ColorPicker({onSubmit:function(a,b,c,d){$(d).val("#"+b.toUpperCase());$(d).ColorPickerHide()},onBeforeShow:function(){$(this).ColorPickerSetColor(this.value)}}).bind("keyup",function(){$(this).ColorPickerSetColor(this.value)});$("aside select, aside tr, aside button").tipsy({gravity:"w",
html:!0});$("nav a").tipsy({gravity:"ne"})});Controller.selectAlgo=function(){Controller.params.selectedAlgo=$("#algoselect").val();Controller.params.reset();Algorithms.prepare[Controller.params.selectedAlgo]()};
Controller.generate=function(){Controller.params.get();var a=Controller.params.validate();Controller.paper.getSize();if(a){a=new Date;!1===Controller.paper.overlaymode?Controller.paper.prepare():Controller.paper.overlaymode=!1;try{Algorithms.draw[Controller.params.selectedAlgo]()}catch(b){alert("An Error occured while executing the Algorithm.\n"+b),console.log(b)}a=new Date-a;$("#benchmark").html("SVG generated in "+a+" ms.").fadeIn(Controller.params.fadeTime)}};
Controller.overlay=function(){Controller.paper.overlaymode=!0;Controller.generate()};Controller.randomize=function(){Controller.params.randomize();Controller.generate()};Controller.exportSVG=function(){var a=new Date,a="SVG-Export-"+a.getFullYear()+"-"+(1+a.getMonth())+"-"+(1+a.getDay())+"-"+(1+a.getHours())+"-"+(1+a.getSeconds())+".svg";$.generateFile({filename:a,content:$("#paper").html(),script:"http://www.svg-generator.de/download.php"});console.log("File "+a+".svg exported.")};
Math.rnd=function(a,b){var c=Math.floor(a),d=Math.floor(b);return Math.floor(Math.random()*(d-c+1)+c)};Math.rndHex=function(){return"#"+Math.floor(16777215*Math.random()).toString(16).toUpperCase()};
